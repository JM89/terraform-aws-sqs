name: pre-commit

on:
  pull_request:
  push:
    branches: [main]

env:
  TERRAFORM_DOCS_VERSION: 0.16.0

jobs:
  pre-commit:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    - name: Install Terraform Docs
      run: |
        wget https://github.com/terraform-docs/terraform-docs/archive/refs/tags/v${TERRAFORM_DOCS_VERSION}.zip |
        unzip v${TERRAFORM_DOCS_VERSION}.zip |
        mv terraform-docs /usr/local/bin/terraform-docs |
        chmod +x /usr/local/bin/terraform-docs
    - uses: actions/setup-python@v3
    - uses: pre-commit/action@v3.0.0
    - name: Commit & Push changes
      uses: actions-js/push@master
      with:
        github_token: ${{ secrets.GITHUB_TOKEN }}